(this.webpackJsonppokedex=this.webpackJsonppokedex||[]).push([[0],{42:function(e,t,a){e.exports=a(78)},47:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){"use strict";a.r(t);var n,r,c,i,o,l,s,u,m,p,f,b,d,v,h,g,O,E,j=a(0),y=a.n(j),_=a(21),k=a.n(_),x=(a(47),a(6)),N=a(12),P=a.n(N),w=a(16),C=a(13),D=a.n(C),z=function(e,t,a){return D.a.get("".concat(e).concat("undefined"!==typeof a?a:""))},L=function(){var e=Object(w.a)(P.a.mark((function e(t,a){return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.a.get("https://pokeapi.co/api/v2/pokemon/".concat(t.id),{cancelToken:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=a(40),S=a(38),T=a(41),B=a(7),U=a(20),A=a(24),R=a(2),F=(a(65),a(1)),J=new(n=function(){function e(){Object(U.a)(this,e),Object(B.a)(this,"pokemons",r,this),Object(B.a)(this,"limit",c,this),this.prevPage=null,this.nextPage=null,this.baseUrl="https://pokeapi.co/api/v2/pokemon",this.limitSelect=[20,30,50],Object(B.a)(this,"changeLimit",i,this)}return Object(A.a)(e,[{key:"addPokemons",value:function(e){this.pokemons=Object(T.a)(e),M.addPokemons(e)}},{key:"setPrevPage",value:function(e){this.prevPage=e}},{key:"setNextPage",value:function(e){this.nextPage=e}},{key:"url",get:function(){return this.nextPage?"".concat(this.baseUrl,"/?limit=").concat(this.limit):"https://pokeapi.co/api/v2/pokemon"}}]),e}(),r=Object(R.a)(n.prototype,"pokemons",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(R.a)(n.prototype,"limit",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),Object(R.a)(n.prototype,"url",[F.g],Object.getOwnPropertyDescriptor(n.prototype,"url"),n.prototype),Object(R.a)(n.prototype,"addPokemons",[F.f],Object.getOwnPropertyDescriptor(n.prototype,"addPokemons"),n.prototype),Object(R.a)(n.prototype,"setPrevPage",[F.f],Object.getOwnPropertyDescriptor(n.prototype,"setPrevPage"),n.prototype),Object(R.a)(n.prototype,"setNextPage",[F.f],Object.getOwnPropertyDescriptor(n.prototype,"setNextPage"),n.prototype),i=Object(R.a)(n.prototype,"changeLimit",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.limit=t,console.log("limit",e.limit)}}}),n),K=Object(j.createContext)(J),M=new(o=function e(){Object(U.a)(this,e),Object(B.a)(this,"list",l,this),Object(B.a)(this,"addPokemons",s,this)},l=Object(R.a)(o.prototype,"list",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),s=Object(R.a)(o.prototype,"addPokemons",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){t.forEach((function(t){return e.list.set(t.name,t)}))}}}),o),H=Object(j.createContext)(F.n.box(!0)),V=(u=function(){function e(){Object(U.a)(this,e),Object(B.a)(this,"filter",m,this)}return Object(A.a)(e,[{key:"change",value:function(e){this.filter=e}},{key:"clear",value:function(){this.filter=""}},{key:"filteredList",get:function(){var e,t=[],a=Object(S.a)(M.list);try{for(a.s();!(e=a.n()).done;){var n=Object(I.a)(e.value,2),r=n[0],c=n[1];r.includes(this.filter)&&t.push(c)}}catch(i){a.e(i)}finally{a.f()}return t}}]),e}(),m=Object(R.a)(u.prototype,"filter",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Object(R.a)(u.prototype,"filteredList",[F.g],Object.getOwnPropertyDescriptor(u.prototype,"filteredList"),u.prototype),Object(R.a)(u.prototype,"change",[F.f],Object.getOwnPropertyDescriptor(u.prototype,"change"),u.prototype),Object(R.a)(u.prototype,"clear",[F.f],Object.getOwnPropertyDescriptor(u.prototype,"clear"),u.prototype),u),W=Object(j.createContext)(new V),Y=(p=function e(){Object(U.a)(this,e),Object(B.a)(this,"data",f,this),Object(B.a)(this,"error",b,this),Object(B.a)(this,"id",d,this),Object(B.a)(this,"setId",v,this),Object(B.a)(this,"updateData",h,this),Object(B.a)(this,"clearData",g,this),Object(B.a)(this,"setError",O,this),Object(B.a)(this,"clearError",E,this)},f=Object(R.a)(p.prototype,"data",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(R.a)(p.prototype,"error",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=Object(R.a)(p.prototype,"id",[F.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=Object(R.a)(p.prototype,"setId",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log("setId"),e.id=t}}}),h=Object(R.a)(p.prototype,"updateData",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){console.log("updateData"),e.data=t}}}),g=Object(R.a)(p.prototype,"clearData",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){console.log("clearData"),e.data=null}}}),O=Object(R.a)(p.prototype,"setError",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.error=t}}}),E=Object(R.a)(p.prototype,"clearError",[F.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.error=null}}}),p),$=Object(j.createContext)(new Y),q=(a(66),a(14));a(67);function G(e){var t=e.data,a=t.index,n=t.name;return y.a.createElement(q.b,{to:"/pokemon/".concat(a),className:"poke-card"},y.a.createElement("img",{src:"https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/".concat(a,".png"),alt:n}),y.a.createElement("div",null,n))}a(72);var Q=Object(x.a)((function(e){var t=e.data,a=t.link,n=t.className,r=t.actions;return y.a.createElement("div",{onClick:function(){r(a),document.documentElement.scrollTop-=document.documentElement.scrollTop},className:n})})),X=Object(x.a)((function(e){var t=Object(j.useContext)(K),a=t.limitSelect,n=Object(j.useRef)(null),r=t.limit;return y.a.createElement("select",{onChange:function(){t.changeLimit(n.current.value)},value:r,ref:n},a.map((function(e){return y.a.createElement("option",{value:e,key:e},e)})))}));Object(F.h)({enforceActions:"observed"});var Z=Object(x.a)((function(e){var t=Object(j.useContext)(K),a=Object(j.useContext)(H),n=function(){var e=Object(w.a)(P.a.mark((function e(n){var r,c;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(n);case 2:r=e.sent,c=r.data,t.setPrevPage(c.previous),t.setNextPage(c.next),Object(F.o)((function(){return a.set(!1)})),t.addPokemons(c.results.map((function(e){var t=/.*\/(\d*)\/.*?$/g.exec(e.url)[1];return{name:e.name,url:e.url,index:t}})));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.useEffect)((function(){!t.nextPage&&n(t.url),t.nextPage&&n(t.url)}),[t.limit]),y.a.createElement(j.Fragment,null,y.a.createElement("div",{className:"pokedex__limit"},y.a.createElement(X,null)),y.a.createElement("div",{className:"poke-list"},a.get()&&"Loading...",t.pokemons.length?t.pokemons.slice().map((function(e){return y.a.createElement(G,{key:e.name,data:e})})):""),t.nextPage&&y.a.createElement(Q,{data:{link:t.nextPage,className:"nextPage",actions:n}}),t.prevPage&&y.a.createElement(Q,{data:{link:t.prevPage,className:"prevPage",actions:n}}))})),ee=(a(73),Object(x.a)((function(e){var t=e.data,a=t.sprites,n=t.stats,r=t.types,c=t.name,i=t.base_experience,o=t.moves,l=t.abilities;console.log("data",t);return y.a.createElement("div",{className:"pokemon"},y.a.createElement("div",{className:"pokemon__name"},t.name),y.a.createElement("div",{className:"pokemon__image image"},y.a.createElement("div",{className:"image__front"},y.a.createElement("div",{className:"image__title"},"Front"),y.a.createElement("img",{className:"image__img",src:a.front_default,alt:"".concat(c," front")})),y.a.createElement("div",{className:"image__back"},y.a.createElement("div",{className:"image__title"},"Back"),y.a.createElement("img",{className:"image__img",src:a.back_default,alt:"".concat(c," back")}))),y.a.createElement("div",{className:"pokemon__type type"},y.a.createElement("div",{className:"type__title"},"TYPE"),r.map((function(e){return y.a.createElement("div",{key:e.type.name,className:"type__item"},e.type.name)}))),y.a.createElement("div",{className:"pokemon__abilities abilities"},y.a.createElement("div",{className:"abilities__title"},"ABILITIES"),l.map((function(e){return y.a.createElement("div",{key:e.ability.name,className:"abilities__item"},e.ability.name)}))),y.a.createElement("div",{className:"pokemon__stats stats"},[y.a.createElement("div",{key:"base_experience",className:"stats__item stat"},y.a.createElement("div",{className:"stat__name"},"base experience"),y.a.createElement("div",{className:"stat__value"},y.a.createElement("div",{className:"stat__value_calc",style:{width:"".concat(i,"%")}}),y.a.createElement("div",{className:"stat__value_disp"},i)))].concat(n.map((function(e){return y.a.createElement("div",{key:e.stat.name,className:"stats__item stat"},y.a.createElement("div",{className:"stat__name"},e.stat.name),y.a.createElement("div",{className:"stat__value"},y.a.createElement("div",{className:"stat__value_calc",style:{width:"".concat(e.base_stat,"%")}}),y.a.createElement("div",{className:"stat__value_disp"},e.base_stat)))})))),y.a.createElement("div",{className:"pokemon__moves moves"},y.a.createElement("div",{className:"moves__title"},"MOVES"),o.map((function(e){return y.a.createElement("div",{key:e.move.name,className:"moves__item"},e.move.name)}))))}))),te=Object(x.a)((function(e){var t=e.match.params.id,a=Object(j.useContext)($),n=Object(j.useContext)(H);return a.setId(t),Object(j.useEffect)((function(){var e=D.a.CancelToken.source();return Object(w.a)(P.a.mark((function r(){var c;return P.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L({id:t},e.token).then((function(e){return e.data}));case 2:c=r.sent,a.updateData(c),Object(F.o)((function(){return n.set(!1)}));case 5:case"end":return r.stop()}}),r)})))(),function(){console.log("return function clear"),e&&e.cancel(),a.clearData()}}),[a.id,t,a]),n.get()?"Loading":y.a.createElement("div",null,a.data&&k.a.createPortal(y.a.createElement(ee,{data:a.data}),document.getElementById("portal")))})),ae=a(3),ne=(a(74),function(){return y.a.createElement("div",{className:"nav"},"PokeDex")}),re=(a(75),function(e){var t={display:"none"};return y.a.createElement("nav",null,y.a.createElement(q.c,{activeStyle:t,to:"/search"},"Search"),y.a.createElement(q.c,{activeStyle:t,exact:!0,to:"/"},"Home"))}),ce=(a(76),Object(x.a)((function(){var e=Object(j.useContext)(W),t=Object(j.useContext)($),a=Object(j.useRef)(null),n=D.a.CancelToken.source(),r=function(){L({id:a.current.value},n.token).then((function(a){e.clear(),t.updateData(a.data)}),(function(e){t.setError(e.response.data),console.log("headers",e.response.headers)}))};return Object(j.useEffect)((function(){return function(){n&&n.cancel()}})),y.a.createElement("div",{className:"pokedex__wrapper"},y.a.createElement("input",{className:"poledex__input",placeholder:"What pokemon are we looking for?",value:e.filter,ref:a,onChange:function(){e.change(a.current.value),t.clearError()},onKeyPress:function(e){console.log("handleKeyPress"),t.clearData(),t.clearError(),"Enter"===e.key&&r()}}),y.a.createElement("button",{onClick:r,className:"poledex__submit"}))}))),ie=(a(77),Object(x.a)((function(e){var t=Object(j.useContext)(W),a=Object(j.useContext)($),n=Object(j.useRef)(null);return console.log("return",a.data),y.a.createElement("div",{className:"search"},y.a.createElement(ce,null),y.a.createElement("div",{className:"search__list",ref:n},function(){var e;return a.data||a.error?(a.data&&(e=y.a.createElement(ee,{data:a.data})),a.error&&(e=y.a.createElement("div",{className:"search__error"},y.a.createElement("div",null,"Can not find"),y.a.createElement("div",null,t.filter.toUpperCase()),y.a.createElement("div",null,"Please, try again"))),e):t.filteredList.length?t.filteredList.map((function(e){return y.a.createElement(G,{key:e.name,data:e})})):t.filter?t.filter&&"Search ".concat(t.filter.toUpperCase()):""}()))})));var oe=Object(x.a)((function(){return y.a.createElement(q.a,null,y.a.createElement(ne,null),y.a.createElement(re,null),y.a.createElement(ae.c,null,y.a.createElement(ae.a,{exact:!0,path:"/",component:Z}),y.a.createElement(ae.a,{path:"/pokemon/:id",component:te}),y.a.createElement(ae.a,{path:"/search",component:ie})))}));k.a.render(y.a.createElement(oe,null),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.fc77bc93.chunk.js.map